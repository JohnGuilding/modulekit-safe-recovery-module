// SPDX-License-Identifier: MIT
pragma solidity ^0.8.21;

import { ISessionKeyManager } from "../../core/ISessionKeyManager.sol";
import { SessionKeyManagerHybrid } from "../../core/SessionKeyManagerHybrid.sol";

bytes constant sessionKeyManager =
    hex"6080806040523461001657611af9908161001c8239f35b600080fdfe608060408181526004918236101561001657600080fd5b600090813560e01c90816306fdde031461056d5750806326fc1fb11461055257806354fd4d501461050d5780636d61fe70146105085780638a91b0e314610508578063cb9b272c146102cb578063ec05ecc11461020b578063ecd05961146101e9578063f42c859d14610142578063f551e2ee146100ed5763fff35b721461009d57600080fd5b346100e6576003199082823601126100e6578335916001600160401b0383116100e9576101609083360301126100e657506020926100df9160243591016109f1565b9051908152f35b80fd5b5080fd5b50346100e65760603660031901126100e65782356001600160a01b038116036100e657604435906001600160401b0382116100e657506020926101329136910161063c565b5050516001600160e01b03198152f35b508092346100e95760203660031901126100e95760019035928383528260205280832033845260205282208281550161017b815461085e565b806101ac575b505050337f10103b778a5e09e8bcc680439d97711489525190a1fe679251002e893f9ea5638380a380f35b82601f82116001146101c4575050555b813880610181565b90918082526101e2601f60208420940160051c840160018501610898565b55556101bc565b508290346100e65760203660031901126100e657506001602092519135148152f35b5091346102c757816003193601126102c7576024356001600160a01b03811691908290036102c3579282916102bf946060808551610248816106f9565b8581528560208201528587820152015235825281602052828220908252602052209060016102b082519361027b856106f9565b805465ffffffffffff80821687528160301c16602087015260601c848601526102a98451809481930161095b565b0382610745565b606083015251918291826106af565b0390f35b8380fd5b8280fd5b509190346102c7576102dc36610606565b6102e581610802565b9283855260209185835283862033875283528386209165ffffffffffff948561030d84610766565b1665ffffffffffff198554161784558483019561035361032c88610766565b86546bffffffffffff000000000000191660309190911b65ffffffffffff60301b16178655565b8184019261038361036385610779565b87546001600160601b031660609190911b6001600160601b031916178755565b6001809601906060860196610398888861078d565b926001600160401b0384116104f557506103bc836103b6865461085e565b866108af565b8c8092601f85116001146104745750836104639c9a9794600080516020611aa48339815191529c9a979461044f9a979461040b9492610469575b50508160011b916000199060031b1c19161790565b90555b61042d825198888a998a5283610423886108f6565b16908a01526108f6565b16908601526001600160a01b03906104449061069b565b166060850152610909565b9490608080840152339560a084019161093a565b0390a380f35b0135905038806103f6565b8582528b82209391601f198616915b8282106104de57505093600080516020611aa48339815191529b99969361044f9996936001936104639f9d9a9784116104c4575b505050811b01905561040e565b0135600019600384901b60f8161c191690553880806104b7565b84840135865594850194928d0192908d0190610483565b634e487b7160e01b8e526041905260248dfd5b610669565b5090346100e957816003193601126100e95780516102bf9161052e8261072a565b6005825264302e302e3160d81b6020830152519182916020835260208301906105c6565b5090346100e9576020906100df61056836610606565b610802565b905082346102c757826003193601126102c7576102bf925061058e8261072a565b601782527f53657373696f6e4b65794d616e616765724879627269640000000000000000006020830152519182916020835260208301905b919082519283825260005b8481106105f2575050826000602080949584010152601f8019910116010190565b6020818301810151848301820152016105d1565b6003199060208183011261063757600435916001600160401b03831161063757826080920301126106375760040190565b600080fd5b9181601f84011215610637578235916001600160401b038311610637576020838186019501011161063757565b34610637576020366003190112610637576004356001600160401b0381116106375761069990369060040161063c565b005b35906001600160a01b038216820361063757565b60a060606106f6936020845265ffffffffffff8082511660208601526020820151166040850152600180841b036040820151168285015201519160808082015201906105c6565b90565b608081019081106001600160401b0382111761071457604052565b634e487b7160e01b600052604160045260246000fd5b604081019081106001600160401b0382111761071457604052565b90601f801991011681019081106001600160401b0382111761071457604052565b3565ffffffffffff811681036106375790565b356001600160a01b03811681036106375790565b903590601e198136030182121561063757018035906001600160401b0382116106375760200191813603831361063757565b928594916020969365ffffffffffff60d01b809260d01b16865260d01b1660068501526001600160601b03199060601b16600c8401528483013701016000815290565b61080b81610766565b9061085861081b60208301610766565b61084a61083861082d60408601610779565b94606081019061078d565b906040519586946020860198896107bf565b03601f198101835282610745565b51902090565b90600182811c9216801561088e575b602083101461087857565b634e487b7160e01b600052602260045260246000fd5b91607f169161086d565b8181106108a3575050565b60008155600101610898565b9190601f81116108be57505050565b6108ea926000526020600020906020601f840160051c830193106108ec575b601f0160051c0190610898565b565b90915081906108dd565b359065ffffffffffff8216820361063757565b9035601e19823603018112156106375701602081359101916001600160401b03821161063757813603831361063757565b908060209392818452848401376000828201840152601f01601f1916010190565b80546000939261096a8261085e565b918282526020936001916001811690816000146109d25750600114610991575b5050505050565b90939495506000929192528360002092846000945b8386106109be5750505050010190388080808061098a565b8054858701830152940193859082016109a6565b60ff19168685015250505090151560051b01019150388080808061098a565b6109fe606082018261078d565b60041161063757356001600160e01b031916631a7e6adf60e11b03610a2757906106f6916110f8565b600090610a3861014082018261078d565b5091823560f81c15610e995750602282810135830190604280850135850180820192610a819286356001600160a01b03169260628901358901808401359392019101358561194d565b803560f81c600185013560f81c1015610e54574660436107f8600187013560f51c166042870135870101013560c01c03610e0f576043906040516020810190610aef8161084a602288013560428901600e8c013560601c8c6002600882013560d01c91013560d01c896107bf565b5190209182916107f8611fe0600189013560f31c16913560f51c16604288013588010101013503610dca57604051610b26816106f9565b600285013560d01c815260208101600886013560d01c815260408201600e87013560601c8152610bd7610b6136602288013560428901611071565b6060850190815260008681526020818152604080832033845290915290208551815495516001600160601b031990961665ffffffffffff919091161760309590951b65ffffffffffff60301b16949094178455915b5183546001600160601b031660609190911b6001600160601b031916178355565b518051906001600160401b03821161071457610c0382610bfa600186015461085e565b600186016108af565b602090601f8311600114610d4e57926001610c438460209a9895610cd09895610c8e9b98600092610d435750508160011b916000199060031b1c19161790565b9101555b600080516020611aa483398151915260405180610c653394826106af565b0390a3610cb060405197889586956384f16a4d60e01b8752608060048801526084870190610f9d565b906024860152600319928386830301604487015260426022820135910161093a565b83810390910160648401526082860135860160228101359060420161093a565b03816000600e86013560601c5af18015610d37576106f692600091610d08575b506002600883013560d01c92013560d01c9015611a65565b610d2a915060203d602011610d30575b610d228183610745565b810190610f85565b38610cf0565b503d610d18565b6040513d6000823e3d90fd5b0151905038806103f6565b906001840160005260206000209160005b601f1985168110610db25750600184610cd09794610c8e9a9794839460209d9b98601f19811610610d99575b505050811b01910155610c47565b015160001960f88460031b161c19169055388080610d8b565b91926020600181928685015181550194019201610d5f565b60405162461bcd60e51b815260206004820152601f60248201527f534b4d3a2053657373696f6e4b657944617461486173684d69736d61746368006044820152606490fd5b60405162461bcd60e51b815260206004820152601b60248201527f534b4d3a2053657373696f6e436861696e49644d69736d6174636800000000006044820152606490fd5b60405162461bcd60e51b815260206004820152601b60248201527f534b4d3a2053657373696f6e4b6579496e646578496e76616c696400000000006044820152606490fd5b9392916020906021810135810190610ebf906001013584356001600160a01b03166118d9565b92610ef287855460601c92610f2a604051988996879586946384f16a4d60e01b8652608060048701526084860190610f9d565b916024850152610f12600319928386820301604487015260018c0161095b565b9184830301606485015260216001820135910161093a565b03925af1918215610f7a576106f6939492610f59575b50549065ffffffffffff808360301c1692169015611a65565b610f7391925060203d602011610d3057610d228183610745565b9038610f40565b6040513d86823e3d90fd5b90816020910312610637575180151581036106375790565b6106f691611052611003610fe86101606001600160a01b03610fbe8761069b565b16855260208601356020860152610fd86040870187610909565b909180604088015286019161093a565b610ff56060860186610909565b90858303606087015261093a565b6080840135608084015260a084013560a084015260c084013560c084015260e084013560e0840152610100808501359084015261012061104581860186610909565b918584039086015261093a565b916110636101409182810190610909565b92909181850391015261093a565b9291926001600160401b038211610714576040519161109a601f8201601f191660200184610745565b829481845281830111610637578281602093846000960137010152565b908210156110d2576110ce9160051b81019061078d565b9091565b634e487b7160e01b600052603260045260246000fd5b91908110156110d25760051b0190565b61110661014082018261078d565b5080358101916020820135820193602085019435604084013584019360608101350195818635036118945760005b8635811061185e575050506020527b19457468657265756d205369676e6564204d6573736167653a0a3332600052611178603c600420943690602081359101611071565b6001906040519560208201906000525160405260408151146118385760418151146118195750506020600160806000805b5afa51923d1561180b576000606052846040526111c9606083018361078d565b5093600485013585019460248101358101906044810135019685356004880135036117c9575065ffffffffffff9660009660005b8735811061123057505050505050505065ffffffffffff60d01b9060d01b169065ffffffffffff60a01b9060a01b161790565b61123f81893560208b016110b7565b50876000823560f81c1561169c575050611269611264836004860135602487016110e8565b610779565b61127b836004880135602489016110e8565b3561128e846004880135602489016110b7565b91909260d09360238601358601908c35600188013560f81c1015611657576112c48d600189013560f81c906020813591016110b7565b50803560f81c600289013560f81c1015610e54574660016107f860028b013560f51c168301013560c01c03610e0f576001908860405161132f8161084a8c602083019560238b01359160438c0191600f81013560601c9160036009830135821c920135901c896107bf565b519020918291611fe060028c013560f31c16906107f8813560f51c160101013503610dca57604051611360816106f9565b6003890135881c81526020810160098a0135891c815260408201600f8b013560601c81526113f961139936602389013560438a01611071565b9160608501928352856000526000602052604060002033600052602052610bb665ffffffffffff6040600020958188511682198854161787555116859065ffffffffffff60301b82549160301b169065ffffffffffff60301b1916179055565b518051906001600160401b0382116107145761141c82610bfa600186015461085e565b602090601f83116001146115d657936114bb936001611461856114f69a9660209e9d9c9a966114d79a600092610d435750508160011b916000199060031b1c19161790565b9101555b600080516020611aa4833981519152604051806114833394826106af565b0390a3604051988997889763c20bccb960e01b895260018060a01b03166004890152602488015260a0604488015260a487019161093a565b600319928386830301606487015260436023820135910161093a565b838103909101608484015260438881013589016023810135910161093a565b03816000600f88013560601c5af1908115610d37576000916115a7575b509060036009840135821c930135901c905b6001600160a01b03908116908816036115965765ffffffffffff81168015159081611584575b5061157c575b5065ffffffffffff8a1665ffffffffffff821611611573575b506001016111fd565b9850600161156a565b9a5038611551565b905065ffffffffffff8d16113861154b565b505050505050505050505050600090565b6115c9915060203d6020116115cf575b6115c18183610745565b810190611a46565b38611513565b503d6115b7565b906001840160005260206000209160005b601f198516811061163f5750936001808560209d9c9b99956114d799956114bb996114f69d99601f19811610611626575b505050811b01910155611465565b015160001960f88460031b161c19169055388080611618565b919260206001819286850151815501940192016115e7565b60405162461bcd60e51b815260206004820152601d60248201527f534b4d3a20534b456e61626c6544617461496e646578496e76616c69640000006044820152606490fd5b909160206116fc916116b96112648760048a013560248b016110e8565b6117726116ce8860048d013560248e016110e8565b35926116e28960048d013560248e016110b7565b9098909690600183013590356001600160a01b03166118d9565b9061175161173b83549a604051998a98899863c20bccb960e01b8a5260018060a01b031660048a0152602489015260a0604489015260a488019161093a565b600160031994858884030160648901520161095b565b8481039092016084850152602181810135909101908101359060410161093a565b0381858760601c5af19182156117bd579161179e575b5065ffffffffffff808360301c16921690611525565b6117b7915060203d6020116115cf576115c18183610745565b38611788565b604051903d90823e3d90fd5b62461bcd60e51b815260206004820181905260248201527f534b4d3a2053657373696f6e496e666f206c656e677468206d69736d617463686044820152606490fd5b638baa579f6000526004601cfd5b6080600060209360408460606001960151841a875201516060526111a9565b6080600060209360406001940151601b8160ff1c018652848060ff1b03166060526111a9565b8061188e6118736001938a3560208c016110b7565b61187e8488886110b7565b91868060a01b038b35169361194d565b01611134565b60405162461bcd60e51b815260206004820152601960248201527f534b4d3a2045444c6973744c656e6774684d69736d61746368000000000000006044820152606490fd5b90600052600060205260406000209060018060a01b0316600052602052604060002090815460601c1561190857565b60405162461bcd60e51b815260206004820152601f60248201527f534b4d3a2053657373696f6e206b6579206973206e6f7420656e61626c6564006044820152606490fd5b61195d9061199593923691611071565b90815194602095868094012094604051809581948293630b135d3f60e11b998a8552600485015260406024850152604484019161093a565b03916001600160a01b03165afa908115610d3757600091611a08575b506001600160e01b031916036119c45750565b6064906040519062461bcd60e51b82526004820152601760248201527f534b4d3a2053657373696f6e4e6f74417070726f7665640000000000000000006044820152fd5b8381813d8311611a3f575b611a1d8183610745565b810103126100e95751906001600160e01b0319821682036100e65750386119b1565b503d611a13565b9081602091031261063757516001600160a01b03811681036106375790565b90919015611a995760ff6001915b65ffffffffffff60d01b9060d01b169265ffffffffffff60a01b9060a01b169116171790565b60ff600091611a7356fe57aa9b35aca9ac2ac77db1278fe563afa57004616360740e680d89bc674ebd1ea2646970667358221220c66635361b88ef5a3f50b9b654c0f2737b1b84bcebb4a5b37d0cf8a9100928f364736f6c63430008170033";

// function etchSessionKeyManager() returns (ISessionKeyManager) {
//     address _addr;
//     bytes memory _code = sessionKeyManager;
//     assembly {
//         _addr := create(0, add(_code, 0x20), mload(_code))
//     }
//     return ISessionKeyManager(_addr);
// }

function etchSessionKeyManager() returns (ISessionKeyManager) {
    address _addr = address(new SessionKeyManagerHybrid());
    return ISessionKeyManager(_addr);
}
